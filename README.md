# MovieInfo - 电影信息网站

[![Go Version](https://img.shields.io/badge/Go-1.19+-blue.svg)](https://golang.org)
[![Gin Framework](https://img.shields.io/badge/Gin-1.9+-green.svg)](https://gin-gonic.com)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

## 项目简介

MovieInfo 是一个基于 Go 语言开发的电影信息网站学习项目。项目采用多服务架构设计，服务间使用 gRPC 通信，为后期微服务改造做准备。

### 核心特性

- 🎬 **电影信息展示** - 电影列表、详情查看
- 👤 **用户系统** - 用户注册、登录
- ⭐ **评分功能** - 用户评分和评价
- 🏠 **统一入口** - Web 前端访问入口
- 🔗 **gRPC 通信** - 服务间高效通信

### 技术栈

- **后端框架**: Go + Gin
- **前端模板**: Gin Template
- **服务通信**: gRPC
- **数据库**: MySQL
- **缓存**: Redis

### 系统架构

```
┌─────────────────┐
│   用户访问      │
│   (Browser)     │
└─────────┬───────┘
          │
          ▼
┌─────────────────┐
│   Web 服务      │
│  (前端入口)     │
└─────────┬───────┘
          │ gRPC
    ┌─────┼─────┐
    │     │     │
    ▼     ▼     ▼
┌───────┐ ┌───────┐ ┌───────┐
│用户服务│ │电影服务│ │评分服务│
└───┬───┘ └───┬───┘ └───┬───┘
    │         │         │
    └─────────┼─────────┘
              │
              ▼
    ┌─────────────────┐
    │  MySQL + Redis  │
    └─────────────────┘
```

### 服务说明

| 服务名称 | 端口 | 功能描述 |
|---------|------|----------|
| **Web服务** | 8080 | 前端页面，用户访问入口 |
| **用户服务** | 8081 | 用户注册、登录管理 |
| **电影服务** | 8082 | 电影信息管理 |
| **评分服务** | 8083 | 电影评分和评价功能 |

## 项目结构

```
movieinfo/
├── cmd/                    # 服务启动入口
│   ├── web/               # Web服务
│   ├── user/              # 用户服务
│   ├── movie/             # 电影服务
│   └── rating/            # 评分服务
├── internal/              # 内部包
│   ├── config/            # 配置管理
│   ├── models/            # 数据模型
│   ├── handlers/          # HTTP处理器
│   └── services/          # 业务逻辑
├── pkg/                   # 公共包
│   ├── database/          # 数据库连接
│   ├── redis/             # Redis连接
│   └── grpc/              # gRPC客户端
├── proto/                 # gRPC协议定义
├── templates/             # HTML模板
├── static/                # 静态资源
├── configs/               # 配置文件
├── go.mod
└── README.md
```

## 功能列表

### 基础功能

#### 用户功能
- 用户注册
- 用户登录/登出
- 密码修改

#### 电影功能
- 电影列表浏览
- 电影详情查看
- 电影搜索
- 电影分类筛选

#### 评分功能
- 电影评分（1-10分）
- 个人评分记录
- 电影平均评分显示


## 功能模块

### Web服务
- 首页展示
- 电影列表和详情页面
- 用户登录注册页面
- 调用后端gRPC服务

### 用户服务
- 用户注册
- 用户登录

### 电影服务
- 电影信息查询
- 电影列表展示
- 基础搜索功能

### 评分服务
- 电影评分
- 评分管理

## 环境要求

- Go 1.19+
- MySQL 8.0+
- Redis 6.0+


## 快速开始

### 1. 克隆项目
```bash
git clone https://github.com/3inchtime/movieinfo.git
cd movieinfo
```

### 2. 安装依赖
```bash
go mod tidy
```

### 3. 配置数据库
- 创建MySQL数据库
- 配置Redis连接
- 修改配置文件

### 4. 启动服务
```bash
# 启动用户服务
go run cmd/user/main.go

# 启动电影服务
go run cmd/movie/main.go

# 启动评分服务
go run cmd/rating/main.go

# 启动Web服务
go run cmd/web/main.go
```

### 5. 访问应用
打开浏览器访问: http://localhost:8080

## 开发文档

本项目采用循序渐进的开发方式，将整个开发过程拆分为38个详细步骤，每个步骤都有独立的开发文档。

### 开发文档架构
- [开发文档架构](docs/开发文档架构.md) - 完整的开发步骤规划和文档结构

### 开发阶段
1. **项目基础搭建** (步骤1-3) - 项目初始化、数据库设计、配置管理
2. **基础设施搭建** (步骤4-6) - 数据库连接、缓存系统、日志系统
3. **gRPC协议定义** (步骤7-9) - 各服务的协议定义
4. **数据模型层** (步骤10-12) - 数据访问层实现
5. **用户服务开发** (步骤13-16) - 用户相关功能实现
6. **电影服务开发** (步骤17-20) - 电影相关功能实现
7. **评分服务开发** (步骤21-24) - 评分相关功能实现
8. **Web服务开发** (步骤25-30) - 前端页面和接口实现
9. **系统集成与优化** (步骤31-34) - 性能优化和监控
10. **测试与部署** (步骤35-38) - 测试和部署配置

### 开发原则
- 严格按照步骤顺序进行开发
- 每个步骤都有完整的代码实现
- 循序渐进，从0到1搭建整个系统
- 每个步骤都包含测试验证


## 开发计划

- [ ] 项目初始化和基础配置
- [ ] 数据库模型设计
- [ ] gRPC协议定义
- [ ] 用户服务开发
- [ ] 电影服务开发
- [ ] 评分服务开发
- [ ] Web前端开发
- [ ] 基础测试

## 微服务改造准备

本项目虽然是学习项目，但在设计时已考虑微服务改造：

1. **服务拆分**: 按业务领域拆分为独立服务
2. **gRPC通信**: 服务间使用gRPC协议
3. **配置管理**: 独立的配置管理
4. **数据隔离**: 为每个服务预留独立数据存储的可能

## 许可证

本项目采用 MIT 许可证。

---

⭐ 这是一个学习项目，欢迎交流和改进！